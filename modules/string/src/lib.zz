using <string.h>::{strlen, memcpy};

export struct String+ {
    usize   len;
    char    mem[];
}

export fn append(String+t mut * self, char * cstr)
{
    usize mut inlen = as<usize>(strlen(cstr));

    if inlen + self->len > t - 1 {
        inlen = t - 1 - self->len;
    }

    memcpy(self->mem + self->len, cstr, inlen);
    self->len += inlen;
}


