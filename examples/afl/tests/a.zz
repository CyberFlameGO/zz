test bob {
    stdin   =   "hi\n"
    stdout  =   "3\n"
    exit    =   2
}

test kermit {
    stdin   =   "123456789"
    stdout  =   "9\n"
    exit    =   1
}

using <stdio.h>::{printf, fread, stdin};
using <string.h>::{strcmp, strlen};

pub fn main() -> int {

    char mut buffer[10] = {0};
    fread(buffer, sizeof(char), 10, stdin);

    // note the intentional bug: if we read exactly 10, it might not be 0 terminated
    // afl should find this
    printf("%u\n", strlen(buffer));

    if strcmp(buffer, "hi\n") == 0 {
        return 2;
    } else {
        return 1;
    }
}
